{% extends "base.html" %}
{% block title %}ğŸ“Š Resumen General{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/reportes/resumen_general.css') }}">

<h2 class="titulo-reporte">ğŸ“Š Resumen General</h2>

<div class="grid-graficos">
    <!-- Ventas por DÃ­a -->
    <div class="grafico-container">
        <h3>ğŸ“… Ventas por DÃ­a</h3>
        <canvas id="ventasDiaChart"></canvas>
    </div>

    <!-- Formas de Pago -->
    <div class="grafico-container">
        <h3>ğŸ’³ Formas de Pago</h3>
        <canvas id="formasPagoChart"></canvas>
    </div>

    <!-- Productos MÃ¡s Vendidos -->
    <div class="grafico-container">
        <h3>ğŸ”¥ Productos MÃ¡s Vendidos</h3>
        <canvas id="productosMasVendidosChart"></canvas>
    </div>

    <!-- CategorÃ­as MÃ¡s Vendidas -->
    <div class="grafico-container">
        <h3>ğŸ·ï¸ CategorÃ­as MÃ¡s Vendidas</h3>
        <canvas id="categoriasChart"></canvas>
    </div>

    <!-- Vendedores con MÃ¡s Ventas -->
    <div class="grafico-container">
        <h3>ğŸ§‘â€ğŸ’¼ Vendedores con MÃ¡s Ventas</h3>
        <canvas id="vendedoresChart"></canvas>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const resumen = {{ resumen | tojson }};

    new Chart(document.getElementById('ventasDiaChart'), {
        type: 'bar',
        data: {
            labels: resumen.ventas_dia.map(e => e[0]),
            datasets: [{
                label: 'S/. Ventas',
                data: resumen.ventas_dia.map(e => e[1]),
                backgroundColor: '#1b3a57'
            }]
        }
    });

    new Chart(document.getElementById('formasPagoChart'), {
        type: 'doughnut',
        data: {
            labels: resumen.formas_pago.map(e => e[0]),
            datasets: [{
                data: resumen.formas_pago.map(e => e[1]),
                backgroundColor: ['#2f5b80', '#4b7ca7', '#86b3d1']
            }]
        }
    });

    new Chart(document.getElementById('productosMasVendidosChart'), {
        type: 'bar',
        data: {
            labels: resumen.productos.map(e => e[0]),
            datasets: [{
                label: 'Unidades',
                data: resumen.productos.map(e => e[1]),
                backgroundColor: '#4b7ca7'
            }]
        }
    });

    new Chart(document.getElementById('categoriasChart'), {
        type: 'pie',
        data: {
            labels: resumen.categorias.map(e => e[0]),
            datasets: [{
                data: resumen.categorias.map(e => e[1]),
                backgroundColor: ['#1b3a57', '#2f5b80', '#4b7ca7', '#86b3d1', '#c9d9e8']
            }]
        }
    });

    new Chart(document.getElementById('vendedoresChart'), {
        type: 'bar',
        data: {
            labels: resumen.vendedores.map(e => e[0]),
            datasets: [{
                label: 'Ventas',
                data: resumen.vendedores.map(e => e[1]),
                backgroundColor: '#86b3d1'
            }]
        }
    });
</script>
{% endblock %}
